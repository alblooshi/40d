{"ast":null,"code":"import _regeneratorRuntime from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import\"./styles/app.scss\";//Import Components\nimport Player from\"./components/Player\";import Song from\"./components/Song\";import Library from\"./components/Library\";import Nav from\"./components/Nav\";//Import data\nimport chillhop from\"./data\";//Util\nimport{playAudio}from\"./util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){//Ref\nvar audioRef=useRef(null);var _useState=useState(chillhop()),_useState2=_slicedToArray(_useState,2),songs=_useState2[0],setSongs=_useState2[1];var _useState3=useState(songs[0]),_useState4=_slicedToArray(_useState3,2),currentSong=_useState4[0],setCurrentSong=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPlaying=_useState6[0],setIsPlaying=_useState6[1];var _useState7=useState({currentTime:0,duration:0,animationPercentage:0,volume:0}),_useState8=_slicedToArray(_useState7,2),songInfo=_useState8[0],setSongInfo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),libraryStatus=_useState10[0],setLibraryStatus=_useState10[1];var timeUpdateHandler=function timeUpdateHandler(e){var current=e.target.currentTime;var duration=e.target.duration;var roundedCurrent=Math.round(current);var roundedDuration=Math.round(duration);var percentage=Math.round(roundedCurrent/roundedDuration*100);setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:current,duration:duration,animationPercentage:percentage,volume:e.target.volume}));};var songEndHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});_context.next=3;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 3:playAudio(isPlaying,audioRef);return _context.abrupt(\"return\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function songEndHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(libraryStatus?\"library-active\":\"\"),children:[/*#__PURE__*/_jsx(Nav,{libraryStatus:libraryStatus,setLibraryStatus:setLibraryStatus}),/*#__PURE__*/_jsx(\"h2\",{class:\"title\",children:\"\\u0627\\u0644\\u0623\\u0631\\u0628\\u0639\\u064A\\u0646 \\u0641\\u064A \\u062F\\u0639\\u0627\\u0621 \\u0631\\u0628 \\u0627\\u0644\\u0639\\u0627\\u0644\\u0645\\u064A\\u0646  \"}),/*#__PURE__*/_jsx(Song,{isPlaying:isPlaying,currentSong:currentSong}),/*#__PURE__*/_jsx(Player,{audioRef:audioRef,setIsPlaying:setIsPlaying,currentSong:currentSong,isPlaying:isPlaying,songInfo:songInfo,setSongInfo:setSongInfo,songs:songs,setSongs:setSongs,setCurrentSong:setCurrentSong}),/*#__PURE__*/_jsx(Library,{songs:songs,setCurrentSong:setCurrentSong,audioRef:audioRef,isPlaying:isPlaying,setSongs:setSongs,libraryStatus:libraryStatus}),/*#__PURE__*/_jsx(\"audio\",{onLoadedMetadata:timeUpdateHandler,onTimeUpdate:timeUpdateHandler,ref:audioRef,src:currentSong.audio,onEnded:songEndHandler})]});}export default App;","map":{"version":3,"sources":["E:/abdulla/developedbyed/src/App.js"],"names":["React","useState","useRef","Player","Song","Library","Nav","chillhop","playAudio","App","audioRef","songs","setSongs","currentSong","setCurrentSong","isPlaying","setIsPlaying","currentTime","duration","animationPercentage","volume","songInfo","setSongInfo","libraryStatus","setLibraryStatus","timeUpdateHandler","e","current","target","roundedCurrent","Math","round","roundedDuration","percentage","songEndHandler","currentIndex","findIndex","song","id","length","audio"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport \"./styles/app.scss\";\n//Import Components\nimport Player from \"./components/Player\";\nimport Song from \"./components/Song\";\nimport Library from \"./components/Library\";\nimport Nav from \"./components/Nav\";\n//Import data\nimport chillhop from \"./data\";\n//Util\nimport { playAudio } from \"./util\";\n\nfunction App() {\n  //Ref\n  const audioRef = useRef(null);\n\n  const [songs, setSongs] = useState(chillhop());\n  const [currentSong, setCurrentSong] = useState(songs[0]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [songInfo, setSongInfo] = useState({\n    currentTime: 0,\n    duration: 0,\n    animationPercentage: 0,\n    volume: 0,\n  });\n  const [libraryStatus, setLibraryStatus] = useState(false);\n\n  const timeUpdateHandler = (e) => {\n    const current = e.target.currentTime;\n    const duration = e.target.duration;\n\n    const roundedCurrent = Math.round(current);\n    const roundedDuration = Math.round(duration);\n    const percentage = Math.round((roundedCurrent / roundedDuration) * 100);\n    setSongInfo({\n      ...songInfo,\n      currentTime: current,\n      duration: duration,\n      animationPercentage: percentage,\n      volume: e.target.volume,\n    });\n  };\n  const songEndHandler = async () => {\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\n    await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\n    playAudio(isPlaying, audioRef);\n    return;\n  };\n  return (\n    <div className={`App ${libraryStatus ? \"library-active\" : \"\"}`}>\n      <Nav libraryStatus={libraryStatus} setLibraryStatus={setLibraryStatus} />\n      <h2 class=\"title\">الأربعين في دعاء رب العالمين  </h2>\n      <Song isPlaying={isPlaying} currentSong={currentSong} />\n      <Player\n        audioRef={audioRef}\n        setIsPlaying={setIsPlaying}\n        currentSong={currentSong}\n        isPlaying={isPlaying}\n        songInfo={songInfo}\n        setSongInfo={setSongInfo}\n        songs={songs}\n        setSongs={setSongs}\n        setCurrentSong={setCurrentSong}\n      />\n      <Library\n        songs={songs}\n        setCurrentSong={setCurrentSong}\n        audioRef={audioRef}\n        isPlaying={isPlaying}\n        setSongs={setSongs}\n        libraryStatus={libraryStatus}\n      />\n      <audio\n        onLoadedMetadata={timeUpdateHandler}\n        onTimeUpdate={timeUpdateHandler}\n        ref={audioRef}\n        src={currentSong.audio}\n        onEnded={songEndHandler}\n       \n      ></audio>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}