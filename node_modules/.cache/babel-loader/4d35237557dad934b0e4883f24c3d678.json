{"ast":null,"code":"import _regeneratorRuntime from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/abdulla/developedbyed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPlay,faAngleLeft,faAngleRight,faPause,faVolumeDown}from\"@fortawesome/free-solid-svg-icons\";import{playAudio}from\"../util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Player=function Player(_ref){var isPlaying=_ref.isPlaying,setIsPlaying=_ref.setIsPlaying,audioRef=_ref.audioRef,songInfo=_ref.songInfo,setSongInfo=_ref.setSongInfo,currentSong=_ref.currentSong,songs=_ref.songs,setCurrentSong=_ref.setCurrentSong,setSongs=_ref.setSongs;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),activeVolume=_useState2[0],setActiveVolume=_useState2[1];//UseEffect Update List\nvar activeLibraryHandler=function activeLibraryHandler(nextPrev){var newSongs=songs.map(function(song){if(song.id===nextPrev.id){return _objectSpread(_objectSpread({},song),{},{active:true});}else{return _objectSpread(_objectSpread({},song),{},{active:false});}});setSongs(newSongs);};var trackAnim={transform:\"translateX(\".concat(songInfo.animationPercentage,\"%)\")};//Event Handlers\nfunction getTime(time){return Math.floor(time/60)+\":\"+(\"0\"+Math.floor(time%60)).slice(-2);}var dragHandler=function dragHandler(e){audioRef.current.currentTime=e.target.value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:e.target.value}));};var playSongHandler=function playSongHandler(){if(isPlaying){audioRef.current.pause();setIsPlaying(!isPlaying);}else{audioRef.current.play();setIsPlaying(!isPlaying);}};var skipTrackHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(direction){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});//Forward BAck\nif(!(direction===\"skip-forward\")){_context.next=5;break;}_context.next=4;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 4:activeLibraryHandler(songs[(currentIndex+1)%songs.length]);case 5:if(!(direction===\"skip-back\")){_context.next=15;break;}if(!((currentIndex-1)%songs.length===-1)){_context.next=12;break;}_context.next=9;return setCurrentSong(songs[songs.length-1]);case 9:activeLibraryHandler(songs[songs.length-1]);playAudio(isPlaying,audioRef);return _context.abrupt(\"return\");case 12:_context.next=14;return setCurrentSong(songs[(currentIndex-1)%songs.length]);case 14:activeLibraryHandler(songs[(currentIndex-1)%songs.length]);case 15:if(isPlaying)audioRef.current.play();case 16:case\"end\":return _context.stop();}}},_callee);}));return function skipTrackHandler(_x){return _ref2.apply(this,arguments);};}();var changeVolume=function changeVolume(e){var value=e.target.value;audioRef.current.volume=value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{volume:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-control\",children:[/*#__PURE__*/_jsx(\"p\",{children:getTime(songInfo.currentTime)}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"linear-gradient(to right, \\\"#205950\\\",\\\"#2ab3bf\\\")\"},className:\"track\",children:[/*#__PURE__*/_jsx(\"input\",{value:songInfo.currentTime,type:\"range\",max:songInfo.duration||0,min:0,onChange:dragHandler}),/*#__PURE__*/_jsx(\"div\",{style:trackAnim,className:\"animate-track\"})]}),/*#__PURE__*/_jsx(\"p\",{children:songInfo.duration?getTime(songInfo.duration):\"0:00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-control\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return skipTrackHandler(\"skip-back\");},className:\"skip-back\",size:\"2x\",icon:faAngleLeft}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:playSongHandler,className:\"play\",size:\"2x\",icon:isPlaying?faPause:faPlay}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"skip-forward\",size:\"2x\",icon:faAngleRight,onClick:function onClick(){return skipTrackHandler(\"skip-forward\");}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return setActiveVolume(!activeVolume);},icon:faVolumeDown}),activeVolume&&/*#__PURE__*/_jsx(\"input\",{onChange:changeVolume,value:songInfo.volume,max:\"1\",min:\"0\",step:\"0.01\",type:\"range\"})]})]});};export default Player;","map":{"version":3,"sources":["E:/abdulla/developedbyed/src/components/Player.js"],"names":["React","useState","FontAwesomeIcon","faPlay","faAngleLeft","faAngleRight","faPause","faVolumeDown","playAudio","Player","isPlaying","setIsPlaying","audioRef","songInfo","setSongInfo","currentSong","songs","setCurrentSong","setSongs","activeVolume","setActiveVolume","activeLibraryHandler","nextPrev","newSongs","map","song","id","active","trackAnim","transform","animationPercentage","getTime","time","Math","floor","slice","dragHandler","e","current","currentTime","target","value","playSongHandler","pause","play","skipTrackHandler","direction","currentIndex","findIndex","length","changeVolume","volume","background","duration"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faPlay,\n  faAngleLeft,\n  faAngleRight,\n  faPause,\n  faVolumeDown,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { playAudio } from \"../util\";\n\nconst Player = ({\n  isPlaying,\n  setIsPlaying,\n  audioRef,\n  songInfo,\n  setSongInfo,\n  currentSong,\n  songs,\n  setCurrentSong,\n  setSongs,\n}) => {\n  const [activeVolume, setActiveVolume] = useState(false);\n  //UseEffect Update List\n  const activeLibraryHandler = (nextPrev) => {\n    const newSongs = songs.map((song) => {\n      if (song.id === nextPrev.id) {\n        return {\n          ...song,\n          active: true,\n        };\n      } else {\n        return {\n          ...song,\n          active: false,\n        };\n      }\n    });\n\n    setSongs(newSongs);\n  };\n\n  const trackAnim = {\n    transform: `translateX(${songInfo.animationPercentage}%)`,\n  };\n  //Event Handlers\n  function getTime(time) {\n    return (\n      Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\n    );\n  }\n  const dragHandler = (e) => {\n    audioRef.current.currentTime = e.target.value;\n    setSongInfo({ ...songInfo, currentTime: e.target.value });\n  };\n\n  const playSongHandler = () => {\n    if (isPlaying) {\n      audioRef.current.pause();\n      setIsPlaying(!isPlaying);\n    } else {\n      audioRef.current.play();\n      setIsPlaying(!isPlaying);\n    }\n  };\n  const skipTrackHandler = async (direction) => {\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\n\n    //Forward BAck\n    if (direction === \"skip-forward\") {\n      await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\n      activeLibraryHandler(songs[(currentIndex + 1) % songs.length]);\n    }\n    if (direction === \"skip-back\") {\n      if ((currentIndex - 1) % songs.length === -1) {\n        await setCurrentSong(songs[songs.length - 1]);\n        activeLibraryHandler(songs[songs.length - 1]);\n        playAudio(isPlaying, audioRef);\n        return;\n      }\n      await setCurrentSong(songs[(currentIndex - 1) % songs.length]);\n      activeLibraryHandler(songs[(currentIndex - 1) % songs.length]);\n    }\n    if (isPlaying) audioRef.current.play();\n  };\n  const changeVolume = (e) => {\n    let value = e.target.value;\n    audioRef.current.volume = value;\n    setSongInfo({ ...songInfo, volume: value });\n  };\n\n  return (\n    <div className=\"player\">\n      <div className=\"time-control\">\n        <p>{getTime(songInfo.currentTime)}</p>\n        <div\n          style={{\n            background: `linear-gradient(to right, \"#205950\",\"#2ab3bf\")`,\n          }}\n          className=\"track\"\n        >\n          <input\n            value={songInfo.currentTime}\n            type=\"range\"\n            max={songInfo.duration || 0}\n            min={0}\n            onChange={dragHandler}\n          />\n          <div style={trackAnim} className=\"animate-track\"></div>\n        </div>\n        <p>{songInfo.duration ? getTime(songInfo.duration) : \"0:00\"}</p>\n      </div>\n      <div className=\"play-control\">\n        <FontAwesomeIcon\n          onClick={() => skipTrackHandler(\"skip-back\")}\n          className=\"skip-back\"\n          size=\"2x\"\n          icon={faAngleLeft}\n        />\n        <FontAwesomeIcon\n          onClick={playSongHandler}\n          className=\"play\"\n          size=\"2x\"\n          icon={isPlaying ? faPause : faPlay}\n        />\n        <FontAwesomeIcon\n          className=\"skip-forward\"\n          size=\"2x\"\n          icon={faAngleRight}\n          onClick={() => skipTrackHandler(\"skip-forward\")}\n        />\n        <FontAwesomeIcon\n          onClick={() => setActiveVolume(!activeVolume)}\n          icon={faVolumeDown}\n        />\n        {activeVolume && (\n          <input\n            onChange={changeVolume}\n            value={songInfo.volume}\n            max=\"1\"\n            min=\"0\"\n            step=\"0.01\"\n            type=\"range\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Player;\n"]},"metadata":{},"sourceType":"module"}